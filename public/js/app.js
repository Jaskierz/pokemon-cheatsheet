var App=App||{},$body=$("body"),$loading=$("#loader");$.extend(App,{api:"https://pokeapi.co",call:function(t){return $.get(App.api+t,function(t){App.events.populate(t.objects),App.events.fixPagination(t.meta)}),null},events:{fixPagination:function(t){var e=$("nav ul.pager li.next a"),a=$("nav ul.pager li.previous a");null!=t.next?e.attr("href",t.next).parents("li").removeClass("disabled"):e.parents("li").addClass("disabled"),null!=t.previous?a.attr("href",t.previous).parents("li").removeClass("disabled"):a.parents("li").addClass("disabled")},navigate:function(t){if(t.preventDefault(),!$(t.target).parents("li").hasClass("disabled")){var e=$(t.target).attr("href");App.call(e)}return!1},populate:function(t){if(t.length<1)console.error("Not enough pokemon");else{App.pokemon=t;var e=$("#pokemon-list tbody");e.empty(),$.each(App.pokemon,function(t,a){e.append(App.views.listItem(t,a))})}},select:function(t){var e=$(t.relatedTarget).attr("data-pokemon"),a=App.select(e),n=$("#detail");n.find("[data-name]").text(a.name),n.find("[data-attack]").text(a.attack),n.find("[data-defence]").text(a.defence),n.find("[data-speed]").text(a.speed),n.find("[data-hp]").text(a.hp),n.find("[data-image]").attr("src","https://github.com/PokeAPI/pokeapi/blob/master/data/v2/sprites/pokemon/"+a.pkdx_id+".png?raw=true"),n.find("[data-evolutions]").empty(),n.find("[data-evolutions]").html(App.views.evolutions(a))}},init:function(){console.info("The application is ready."),App.call("/api/v1/pokemon?limit=10")},list:function(){return App.pokemon},meta:{},pokemon:[],select:function(t){return App.pokemon[t]},views:{listItem:function(t,e){return"<tr><td>"+e.pkdx_id+'</td><td><img src="https://github.com/PokeAPI/pokeapi/blob/master/data/v2/sprites/pokemon/'+e.pkdx_id+'.png?raw=true" class="rotate"></td><td>'+e.name+"</td><td>"+e.hp+'</td><td><a href="#" data-toggle="modal" data-target="#detail" data-pokemon="'+t+'"><i class="glyphicon glyphicon-search"></i> View</a></td></tr>'},evolutions:function(t){if(t.evolutions.length<1)return $(".evolution-title").hide(),"";var e={};$.each(t.evolutions,function(t,a){var n=a.resource_uri.match(/\/.+\/(\d+)\//);e[a.to]='<li><img src="https://github.com/PokeAPI/pokeapi/blob/master/data/v2/sprites/pokemon/'+n[1]+'.png?raw=true">'+a.to+"</li>"});var a=[];return $.map(e,function(t,e){a.push(t)}),$(".evolution-title").show(),a.join("")}}}),$(document).ready(function(){App.init(),$body.on("show.bs.modal","#detail",App.events.select).on("click","nav ul.pager li a",App.events.navigate)}).ajaxStart(function(){$loading.show()}).ajaxStop(function(){$("footer").show(),$("#pokemon-list").show(),$("nav").show(),$loading.hide()});